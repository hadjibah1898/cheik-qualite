<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conseils Santé Guinée - Accueil</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/quagga@0.12.1/dist/quagga.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .main-content {
            flex-grow: 1;
        }

        /* Styles du Header */
        header {
            text-align: center;
            padding: 30px 20px;
            background: linear-gradient(to right, #3498db, #2c3e50);
            color: white;
            border-bottom-left-radius: 15px;
            border-bottom-right-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .guinea-flag {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 40px;
            height: 25px;
            background: linear-gradient(to bottom, 
                #ce1126 0%, 
                #ce1126 33%, 
                #fcd116 33%, 
                #fcd116 66%, 
                #009e49 66%, 
                #009e49 100%);
            border-radius: 3px;
        }

        header h1 { font-size: 2.8rem; margin-bottom: 10px; }
        header p { font-size: 1.2rem; max-width: 800px; margin: 0 auto; opacity: 0.9; }

        .header-nav { margin-top: 20px; }
        .header-nav ul { list-style: none; display: flex; justify-content: center; gap: 30px; }
        .header-nav ul li a { color: white; text-decoration: none; font-size: 1.1rem; font-weight: 500; transition: color 0.3s ease; }
        .header-nav ul li a:hover { color: #fcd116; }

        /* Styles du bouton hamburger */
        .hamburger-btn {
            display: none; /* Caché par défaut */
            position: absolute;
            top: 25px;
            left: 20px;
            background: transparent;
            border: none;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            z-index: 100;
        }

        /* Styles des sections générales */
        .section-box {
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            margin-top: 30px;
        }

        .section-box h2 {
            font-size: 2.2rem;
            color: #2c3e50;
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
            display: inline-block;
            margin-left: auto;
            margin-right: auto;
        }

        /* Styles de la section de vérification */
        .verification-form {
            max-width: 600px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            flex-wrap: wrap; 
            justify-content: center;
            gap: 10px; 
        }

        .verification-form input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 50px;
            font-size: 1rem;
            text-align: center;
            transition: border-color 0.3s ease;
        }

        .verification-form input:focus {
            outline: none;
            border-color: #3498db;
        }

        .verification-form button {
            margin-top: 20px;
            padding: 12px 25px;
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .verification-form .search-btn {
            background: #2ecc71;
        }
        .verification-form .search-btn:hover {
            background: #27ae60;
        }

        .verification-form .camera-btn {
            background: #e67e22;
        }

        .verification-form .camera-btn:hover {
            background: #d35400;
        }

        .email-form {
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            background: #f0f4f7;
            border-radius: 10px;
            text-align: center;
        }
        .email-form input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 5px;
            margin-bottom: 15px;
            font-size: 1rem;
        }
        .email-form button {
            background: #3498db;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        .email-form button:hover {
            background: #2980b9;
        }
        
        /* Styles de la section "Pourquoi" */
        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }

        .benefit-item {
            text-align: center;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .benefit-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.1);
        }

        .benefit-item i {
            font-size: 2.5rem;
            color: #3498db;
            margin-bottom: 15px;
        }

        .benefit-item h3 {
            font-size: 1.3rem;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .benefit-item p {
            font-size: 0.95rem;
            color: #555;
        }

        /* Styles de la section Produits Locaux */
        .local-products-section {
            margin-top: 30px;
        }

        .local-products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .product-card {
            background: #f8f9fa;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
            transition: transform 0.3s ease;
        }

        .product-card:hover {
            transform: translateY(-5px);
        }

        .product-card img {
            width: 100%;
            height: 180px;
            object-fit: cover;
        }

        .product-content {
            padding: 20px;
            text-align: center;
        }

        .product-content h3 {
            font-size: 1.4rem;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .product-content p {
            font-size: 0.9rem;
            color: #555;
            margin-bottom: 15px;
        }

        .product-badge {
            background: #2ecc71;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        /* Pied de page */
        .site-footer {
            background: linear-gradient(135deg, #3498db, #2c3e50);
            color: #f5f7fa;
            padding: 60px 20px 20px;
            width: 100%;
            margin-top: 40px;
        }

        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 30px;
            padding-bottom: 40px;
            border-bottom: 1px solid #3e5066;
        }

        .footer-section { flex: 1; min-width: 200px; }
        .footer-section h3 { font-size: 1.4rem; margin-bottom: 20px; color: #3498db; border-bottom: 2px solid #3498db; padding-bottom: 10px; display: inline-block; }
        .footer-section p, .footer-section li { font-size: 1rem; line-height: 1.8; }
        .footer-section ul { list-style: none; }
        .footer-section a { color: #f5f7fa; text-decoration: none; transition: color 0.3s ease; }
        .footer-section a:hover { color: #3498db; }
        .footer-section.contact p { display: flex; align-items: center; gap: 10px; }
        .social-icons { display: flex; gap: 15px; margin-top: 10px; }
        .social-icons a { color: #f5f7fa; font-size: 1.5rem; transition: transform 0.3s ease; }
        .social-icons a:hover { transform: translateY(-5px); color: #3498db; }
        .footer-bottom { text-align: center; padding-top: 20px; font-size: 0.9rem; color: #7f8c8d; }

        /* Styles de la caméra et des résultats */
        #interactive.viewport {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            overflow: hidden;
            border-radius: 10px;
        }

        #interactive.viewport canvas, #interactive.viewport video {
            width: 100%;
            height: auto;
        }

        #scan-frame {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 70%;
            height: 30px;
            transform: translate(-50%, -50%);
            border-top: 2px dashed #e67e22;
            border-bottom: 2px dashed #e67e22;
            z-index: 10;
        }

        #result-container {
            margin-top: 30px;
        }

        .result-box {
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .result-box h3 {
            margin-bottom: 10px;
            font-size: 1.5rem;
        }

        .result-box p {
            font-size: 1rem;
            color: #555;
        }

        .result-success {
            background-color: #e8f5e9;
            border: 2px solid #4caf50;
        }

        .result-danger {
            background-color: #ffebee;
            border: 2px solid #f44336;
        }

        .result-info {
            background-color: #e3f2fd;
            border: 2px solid #2196f3;
        }

        .result-box .result-image {
            width: 150px;
            height: 150px;
            border-radius: 10px;
            object-fit: cover;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        /* Styles pour la simulation de code-barres sur PC */
        #pc-barcode-sim {
            margin-top: 20px;
            text-align: center;
        }
        #pc-barcode-sim img {
            width: 250px;
            height: auto;
            border: 1px solid #ccc;
            border-radius: 5px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        #pc-barcode-sim img:hover {
            transform: scale(1.05);
        }

        /* Media Queries pour le mobile */
        @media (max-width: 768px) {
            .footer-container {
                flex-direction: column;
                text-align: center;
            }
            .footer-section h3 {
                display: block;
                text-align: center;
            }
            .social-icons {
                justify-content: center;
            }

            .hamburger-btn {
                display: block;
            }

            .header-nav ul {
                display: none;
                flex-direction: column;
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100vh;
                background: linear-gradient(135deg, #3498db, #2c3e50);
                padding-top: 100px;
                gap: 20px;
                transition: transform 0.5s ease-in-out;
                transform: translateX(-100%);
            }

            .header-nav.active ul {
                display: flex;
                transform: translateX(0);
            }
        }
    </style>
</head>
<body>
    <header>
        <button class="hamburger-btn" aria-label="Toggle navigation menu">
            <i class="fas fa-bars"></i>
        </button>
        <div class="guinea-flag"></div>
        <h1>Conseils Santé Guinée</h1>
        <p>Votre guide pour une vie saine et des produits de qualité en Guinée</p>
        
        <nav class="header-nav" id="header-nav">
            <ul>
                <li><a href="index.html">Accueil</a></li>
                <li><a href="#">Communauté</a></li>
                <li><a href="#">Recettes Saines</a></li>
                <li><a href="#">Alertes ONCQ</a></li>
                <li><a href="#">Espace Experts</a></li>
                <li><a href="#">Mon Profil</a></li>
            </ul>
        </nav>
    </header>

    <div class="main-content container">
        <section class="section-box">
            <h2>Vérifier la Certification d'un Produit</h2>
            <p style="text-align:center; margin-bottom: 20px;">
                <i class="fas fa-barcode" style="color:#3498db;"></i>
                Entrez le numéro de code-barres, le nom du produit, ou le numéro de certification ONCQ.
            </p>
            <form class="verification-form" id="search-form">
                <input type="text" id="product-query" placeholder="Entrez le code ou le nom du produit..." required>
                <button type="submit" class="search-btn"><i class="fas fa-search"></i> Rechercher</button>
                <button type="button" class="camera-btn" onclick="toggleCamera()"><i class="fas fa-camera"></i> Scan par Caméra</button>
            </form>
            
            <div id="scanner-container" style="display:none; text-align:center; position: relative;">
                <div id="interactive" class="viewport"></div>
                <div id="scan-frame"></div>
                <p id="camera-message" style="margin-top: 10px; color: #555;"></p>
                <div id="pc-barcode-sim">
                    <p style="font-size: 0.9em; color: #777;">(Si vous êtes sur PC, vous pouvez cliquer sur l'image ci-dessous pour simuler un scan)</p>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/b/b3/Code-barres_EAN-13_Wikip%C3%A9dia.png" alt="Code-barres de simulation" onclick="simulateScan('9780201379624')">
                </div>
            </div>

            <div id="result-container"></div>

            <div class="email-form" id="email-form-container">
                <h3>Recevoir un lien de scan direct par email</h3>
                <p>Recevez un lien unique pour scanner un produit instantanément sur votre téléphone.</p>
                <form id="email-form-submit">
                    <input type="email" id="email-input" placeholder="Entrez votre email" required>
                    <button type="submit"><i class="fas fa-envelope"></i> Envoyer le lien de scan</button>
                </form>
                <p style="font-size: 0.9em; margin-top: 10px; color: #e67e22;">(Note : Ceci est une simulation. Le lien sera affiché à l'écran.)</p>
            </div>
        </section>

        <section class="section-box local-products-section">
            <h2>Découvrez nos Produits Locaux Certifiés</h2>
            <p style="text-align:center; margin-bottom: 20px;">Soutenons l'économie guinéenne en consommant des produits du terroir, sûrs et de qualité.</p>
            <div class="local-products-grid">
                <div class="product-card">
                    <img src="https://via.placeholder.com/600x400/3498db/ffffff?text=Huile+de+Palme+Certifi%C3%A9e" alt="Huile de palme certifiée">
                    <div class="product-content">
                        <h3>Huile de Palme Rouge</h3>
                        <p>Riche en vitamines A et E. Une source d'antioxydants essentielle à la santé de la peau et de la vue.</p>
                        <span class="product-badge">Certifié ONCQ</span>
                    </div>
                </div>
                <div class="product-card">
                    <img src="https://via.placeholder.com/600x400/2ecc71/ffffff?text=Fonio+Certifi%C3%A9" alt="Fonio certifié">
                    <div class="product-content">
                        <h3>Fonio de Guinée</h3>
                        <p>Une céréale sans gluten, riche en fibres et très nutritive. Parfaite pour une alimentation saine.</p>
                        <span class="product-badge">Certifié ONCQ</span>
                    </div>
                </div>
                <div class="product-card">
                    <img src="https://via.placeholder.com/600x400/e67e22/ffffff?text=Miel+de+Guin%C3%A9e+Certifi%C3%A9" alt="Miel de Guinée certifié">
                    <div class="product-content">
                        <h3>Miel du Fouta</h3>
                        <p>Un miel pur et naturel, issu de l'agriculture biologique. Un excellent substitut au sucre raffiné.</p>
                        <span class="product-badge">Certifié ONCQ</span>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <footer class="site-footer">
        <div class="footer-container">
            <div class="footer-section about">
                <h3>À Propos de nous</h3>
                <p>Conseils Santé Guinée est une initiative dédiée à la promotion d'une meilleure nutrition et d'une vie plus saine pour la population guinéenne.</p>
            </div>
            <div class="footer-section links">
                <h3>Liens Utiles</h3>
                <ul>
                    <li><a href="#">Analyse Alimentaire</a></li>
                    <li><a href="#">Magazines Santé</a></li>
                    <li><a href="#">Vendeurs Certifiés</a></li>
                    <li><a href="#">Conditions d'utilisation</a></li>
                    <li><a href="#">Politique de Confidentialité</a></li>
                </ul>
            </div>
            <div class="footer-section contact">
                <h3>Contactez-nous</h3>
                <p><i class="fas fa-map-marker-alt"></i> Conakry, Guinée</p>
                <p><i class="fas fa-envelope"></i> contact@conseilsanteguinee.com</p>
                <p><i class="fas fa-phone"></i> +224 620 00 00 00</p>
            </div>
            <div class="footer-section social">
                <h3>Suivez-nous</h3>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Conseils Santé Guinée. Tous droits réservés.</p>
        </div>
    </footer>
    
    <script>
        let isCameraActive = false;
        let QuaggaRunning = false;
        
        const searchForm = document.getElementById('search-form');
        const emailForm = document.getElementById('email-form-submit');
        const emailInput = document.getElementById('email-input');
        const emailFormContainer = document.getElementById('email-form-container');
        const productQueryInput = document.getElementById('product-query');
        const scannerContainer = document.getElementById('scanner-container');
        const cameraButton = document.querySelector('.camera-btn');
        const cameraMessage = document.getElementById('camera-message');
        const resultContainer = document.getElementById('result-container');
        let qrcode = null;

        // Fonction pour vérifier le type d'appareil et cacher le formulaire si c'est un mobile
        function checkDeviceAndHideEmailForm() {
            const isMobile = /Mobi|Android/i.test(navigator.userAgent);
            if (isMobile) {
                emailFormContainer.style.display = 'none';
            }
        }

        // Fonction pour vérifier l'URL à l'ouverture de la page
        function checkURLForAction() {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('action') === 'scan') {
                toggleCamera();
            }
        }

        // Appelle les fonctions au chargement de la page
        document.addEventListener('DOMContentLoaded', () => {
            checkDeviceAndHideEmailForm();
            checkURLForAction();
        });

        // Événement pour le formulaire de recherche
        searchForm.addEventListener('submit', function(event) {
            event.preventDefault();
            const query = productQueryInput.value;
            simulateResponse(query);
        });

        // Événement pour le formulaire d'envoi d'email
        emailForm.addEventListener('submit', function(event) {
            event.preventDefault();
            const email = emailInput.value;
            const link = window.location.origin + window.location.pathname + '?action=scan';
            alert(`Lien simulé envoyé à ${email} : \n\n${link}\n\nCliquez sur ce lien sur votre téléphone pour un scan instantané !`);
        });

        // Fonction pour simuler un scan (utile pour PC)
        function simulateScan(code) {
            productQueryInput.value = code;
            toggleCamera();
            simulateResponse(code);
        }

        function toggleCamera() {
            isCameraActive = !isCameraActive;

            if (isCameraActive) {
                scannerContainer.style.display = 'block';
                cameraButton.innerHTML = '<i class="fas fa-camera"></i> Stopper le Scan';
                resultContainer.innerHTML = '';
                startScanner();
            } else {
                scannerContainer.style.display = 'none';
                cameraButton.innerHTML = '<i class="fas fa-camera"></i> Scan par Caméra';
                stopScanner();
            }
        }

        function startScanner() {
            if (QuaggaRunning) return;

            // Détecte le type d'appareil
            const isMobile = /Mobi|Android/i.test(navigator.userAgent);
            const facingMode = isMobile ? "environment" : "user";
            
            // Affiche ou cache l'image de simulation de code-barres
            const pcBarcodeSim = document.getElementById('pc-barcode-sim');
            if (isMobile) {
                pcBarcodeSim.style.display = 'none';
                cameraMessage.textContent = "Pointez la caméra sur le code-barres.";
            } else {
                pcBarcodeSim.style.display = 'block';
                cameraMessage.textContent = "Pointez la webcam sur un code-barres, ou cliquez sur l'image ci-dessous pour simuler un scan.";
            }

            Quagga.init({
                inputStream: {
                    name: "Live",
                    type: "LiveStream",
                    target: document.querySelector('#interactive'),
                    constraints: {
                        width: { min: 640 },
                        height: { min: 480 },
                        facingMode: facingMode
                    },
                },
                decoder: {
                    readers: ["ean_reader", "ean_8_reader", "upc_reader", "upc_e_reader", "code_128_reader", "code_39_reader"]
                },
                locator: {
                    patchSize: "medium",
                    halfSample: true
                }
            }, function(err) {
                if (err) {
                    console.error(err);
                    cameraMessage.textContent = "Erreur : Impossible d'accéder à la caméra.";
                    return;
                }
                Quagga.start();
                QuaggaRunning = true;
            });

            Quagga.onDetected(function(result) {
                if (!isCameraActive) return;
                const code = result.codeResult.code;
                productQueryInput.value = code;
                
                stopScanner();
                toggleCamera();

                simulateResponse(code);
            });
        }

        function stopScanner() {
            if (QuaggaRunning) {
                Quagga.stop();
                QuaggaRunning = false;
            }
        }

        function simulateResponse(query) {
            // Cette fonction simule une base de données locale
            const mockDatabase = [
                { 
                    type: "Huile",
                    barcode: "628102315001",
                    name: "Huile de Palme Rouge 'Fouta'", 
                    producer: "Société AgroGuinée",
                    lotNumber: "HP-2024-LOT-01A",
                    status: "conforme", 
                    certification: "ONCQ-2024-001A",
                    imageUrl: "https://via.placeholder.com/200x200/4caf50/ffffff?text=Produit+Conforme",
                    qrData: "https://conseilsanteguinee.com/produit/628102315001"
                },
                { 
                    type: "Céréale",
                    barcode: "9780201379624",
                    name: "Fonio de Guinée",
                    producer: "Coopérative Fonio Sahel",
                    lotNumber: "FNG-2024-LOT-05B",
                    status: "conforme",
                    certification: "ONCQ-2024-002B",
                    imageUrl: "https://via.placeholder.com/200x200/2ecc71/ffffff?text=Produit+Conforme",
                    qrData: "https://conseilsanteguinee.com/produit/9780201379624"
                },
                { 
                    type: "Miel",
                    barcode: "5449000000996",
                    name: "Miel du Fouta",
                    producer: "Apiculture du Fouta",
                    lotNumber: "MDF-2024-LOT-03C",
                    status: "conforme",
                    certification: "ONCQ-2024-003C",
                    imageUrl: "https://via.placeholder.com/200x200/e67e22/ffffff?text=Produit+Conforme",
                    qrData: "https://conseilsanteguinee.com/produit/5449000000996"
                },
                { 
                    type: "Boisson",
                    barcode: "9781234567890",
                    name: "Jus de Gingembre",
                    producer: "BioJus Guinée",
                    lotNumber: "JGG-2024-LOT-12D",
                    status: "non_conforme",
                    imageUrl: "https://via.placeholder.com/200x200/f44336/ffffff?text=Produit+Non+Conforme",
                    qrData: "https://conseilsanteguinee.com/produit/non_conforme"
                },
                {
                    type: "Assainisseur d'air",
                    barcode: "6043000076488",
                    name: "Nova Fresh (Textile Bleu)",
                    producer: "Sivop, Sénégal",
                    lotNumber: "NF-2023-05D",
                    status: "non_conforme",
                    reason: "Date d'expiration dépassée (01/2025)",
                    imageUrl: "https://via.placeholder.com/200x200/f44336/ffffff?text=Produit+Expir%C3%A9",
                    qrData: "https://conseilsanteguinee.com/produit/non_conforme"
                },
                {
                    type: "Inconnu",
                    barcode: "123456789012",
                    name: "Produit Inconnu",
                    producer: null,
                    lotNumber: null,
                    status: "inconnu",
                    imageUrl: "https://via.placeholder.com/200x200/2196f3/ffffff?text=Statut+Inconnu",
                    qrData: "https://conseilsanteguinee.com/produit/inconnu"
                }
            ];
            
            let product = null;

            // Vérifie d'abord si la requête est un code-barres
            if (!isNaN(query) && query.length >= 8) {
                product = mockDatabase.find(p => p.barcode === query);
            }
            
            // Si le produit n'a pas été trouvé par code-barres, recherche par nom
            if (!product) {
                const normalizedQuery = query.toLowerCase();
                product = mockDatabase.find(p => p.name && p.name.toLowerCase().includes(normalizedQuery));
            }

            // Cas par défaut si aucun produit n'est trouvé
            if (!product) {
                product = mockDatabase.find(p => p.status === "inconnu");
            }
            
            const imageUrl = product.imageUrl;
            const qrData = product.qrData;
            
            let resultHTML = '';
            
            if (product.status === "conforme") {
                resultHTML = `
                    <div class="result-box result-success">
                        <img src="${imageUrl}" alt="Photo du produit conforme" class="result-image">
                        <h3>✅ Produit Certifié et Conforme</h3>
                        <p><strong>Nom du produit :</strong> ${product.name}</p>
                        <p><strong>Type :</strong> ${product.type}</p>
                        <p><strong>Numéro de lot :</strong> ${product.lotNumber}</p>
                        <p><strong>Producteur :</strong> ${product.producer}</p>
                        <p><strong>Numéro de certification :</strong> ${product.certification}</p>
                        <p>Ce produit respecte les normes de l'ONCQ.</p>
                        <div id="qrcode"></div>
                        <p style="font-size: 0.9em; margin-top: 10px;">Scannez ce code QR pour voir la certification en ligne.</p>
                    </div>
                `;
            } else if (product.status === "non_conforme") {
                resultHTML = `
                    <div class="result-box result-danger">
                        <img src="${imageUrl}" alt="Photo du produit non conforme" class="result-image">
                        <h3>❌ Avertissement : Produit Non Conforme</h3>
                        <p><strong>Nom du produit :</strong> ${product.name}</p>
                        <p>Ce produit ne dispose pas d'une certification ONCQ valide ou est en cours de rappel.</p>
                        <p>Pour votre santé, il est déconseillé de consommer ce produit.</p>
                        <p><strong>Raison :</strong> ${product.reason}</p>
                        <div id="qrcode"></div>
                    </div>
                `;
            } else { // Statut "inconnu"
                resultHTML = `
                    <div class="result-box result-info">
                        <img src="${imageUrl}" alt="Photo de produit au statut inconnu" class="result-image">
                        <h3>⚠ Statut Indéterminé</h3>
                        <p>La requête <strong>${query}</strong> ne figure pas dans notre base de données.</p>
                        <p>Cela peut signifier que le produit n'est pas certifié ou que l'information n'est pas encore disponible.</p>
                        <div id="qrcode"></div>
                    </div>
                `;
            }
            
            resultContainer.innerHTML = resultHTML;

            // Génère le code QR
            if (qrcode) {
                qrcode.clear();
            }
            qrcode = new QRCode(document.getElementById("qrcode"), {
                text: qrData,
                width: 150,
                height: 150,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.H
            });
        }

        // Gère le menu hamburger
        document.addEventListener('DOMContentLoaded', () => {
            const hamburgerBtn = document.querySelector('.hamburger-btn');
            const headerNav = document.getElementById('header-nav');

            hamburgerBtn.addEventListener('click', () => {
                headerNav.classList.toggle('active');
                const icon = hamburgerBtn.querySelector('i');
                if (headerNav.classList.contains('active')) {
                    icon.classList.remove('fa-bars');
                    icon.classList.add('fa-times');
                } else {
                    icon.classList.remove('fa-times');
                    icon.classList.add('fa-bars');
                }
            });
        });
    </script>
</body>
</html>